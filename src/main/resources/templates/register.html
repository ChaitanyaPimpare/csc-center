<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Register</title>
</head>
<body>

<h2>Register</h2>

<form th:action="@{/register}" method="post" th:object="${users}">
    <label>Username:</label>
    <input type="text" th:field="*{username}" required><br>

    <label>Password:</label>
    <input type="password" th:field="*{password}" required><br>

    <label>Email:</label>
    <input type="email" th:field="*{email}" required><br>

    <button type="submit">Register</button>
</form>

<p>Already have an account? <a th:href="@{/login}">Login</a></p>


    <script>
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            fetch('/api/users/register', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    username: document.getElementById('regUsername').value,
                    password: document.getElementById('regPassword').value,
                    email: document.getElementById('regEmail').value
                })
            }).then(res => res.text()).then(alert);
        });
        </script>
</body>
</html>